# ü§ñ LangChain-Agents

A collection of AI agents built with **LangChain** and **LangGraph**, implementing a **Human-in-the-Loop (HITL)** architecture. This project demonstrates how to securely integrate Large Language Models (LLMs) with external systems (Databases, Email), giving the user final control over sensitive operations.

## üöÄ Features

- **Human-in-the-Loop (HITL):** Halts agent execution before critical actions (e.g., writing to DB, sending emails).
- **Interactive CLI:** Clean terminal interface for approving or rejecting agent actions.
- **Impact Analysis (SQL):** Previews the consequences of SQL queries (e.g., rows to be updated) before execution.
- **Memory Checkpointing:** The agent's state is persisted, allowing workflows to resume seamlessly after user intervention.

## üõ†Ô∏è Tech Stack

- Python 3.10+
- [LangChain](https://www.langchain.com/) / [LangGraph](https://langchain-ai.github.io/langgraph/)
- Groq API (or Ollama for local models)
- SQLite (using the Chinook sample database)

## üì¶ Installation

1. **Clone the repository:**
   ```bash
   git clone https://github.com/Inexpli/LangChain-Agents
   cd LangChain-Agents
   ```

2. **Create and activate a virtual environment:**
    ```bash
    python -m venv venv
    source venv/bin/activate  # Windows: venv\Scripts\activate
    ```

3. **Install dependencies:**
    ```bash
    pip install -r requirements.txt
    ```

4. **Environment Setup:**
    ```bash
    API_KEY=your_groq_api_key # Or use local models by Ollama
    ```

## üïπÔ∏è Usage

### Email Agent

Simulates an email assistant. The agent reads the "latest email" and proposes a reply. Approval is required before sending.

```bash
python email_agent.py
```

#### Interaction Example:

```plaintext
APPROVAL REQUIRED - EMAIL SEND OPERATION
====================================================================================================
Email to send:
To: Mark@domain.com
Subject: Re: Meeting
Body: Hi Mark, next week works for me. Let's reschedule.
====================================================================================================
[a] Approve  - Send the email
[r] Reject   - Cancel the email
```

### SQL Agent

A database management agent (defaults to `Chinook.db`). 
It allows arbitrary queries, but modifications like (`INSERT`, `UPDATE`, `DELETE`, `CREATE`, `DROP`, `ALTER` and `TRUNCATE`) require approval.

```bash
python sql_agent.py
```

#### Interaction Example:

```plaintext
APPROVAL REQUIRED - WRITE OPERATION
================================================================================
Query to execute:
UPDATE Artist SET Name = 'Records AI' WHERE ArtistId = 276
================================================================================
Rows that will be updated:
[(276, 'Old Name')]
================================================================================
[a] Approve  - Execute the query
[r] Reject   - Cancel the query
[v] View     - Show query again
[p] Preview  - Show impact preview again
```

## ‚ö†Ô∏è Security Notice

The SQL Agent has permissions to modify the database. Despite the Human Approval mechanism, it is recommended to:
1. Use this code primarily on test/development databases.
2. Carefully verify SQL queries generated by the LLM before approving them.

## üìÑ License

The entire repository is under the MIT license.